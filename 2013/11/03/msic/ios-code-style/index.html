<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    

    <title>NYTime Objective-C 程式規範 | KaiRen&#39;s Blog</title>
    <meta name="author" content="Kyle Bai">
    
    <meta name="description" content="Note my learning.">
    
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta property="og:title" content="NYTime Objective-C 程式規範"/>
    <meta property="og:site_name" content="KaiRen&#39;s Blog"/>

    
    <meta property="og:image" content="undefined"/>
    

    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="alternate" href="/atom.xml" title="KaiRen&#39;s Blog" type="application/atom+xml">
    <link rel="stylesheet" href="/css/lib/materialize.min.css">
    <link rel="stylesheet" href="/css/lib/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

    
        <link rel="stylesheet" href="/css/lib/tomorrow-night.css" type="text/css">
    
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>


<body>
    <img src="/weixin_favicon.png" style="position: absolute; left: -9999px; opacity: 0; filter: alpha(opacity=0);">

    <nav class="black">
    <div class="nav-wrapper">
        <a href="#" data-activates="main-menu" class="button-collapse">
            <i class="fa fa-navicon"></i>
        </a>
        <div class="">
            <a href="/" class="brand-logo hide-on-med-and-down">KaiRen&#39;s Blog</a>
            <ul class="right hide-on-med-and-down">
                
                    <li>
                        <a class="menu-home " href="/" >
                            <i class="fa fa-home "></i>
                            
                            Home
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-archive " href="/archives" >
                            <i class="fa fa-archive "></i>
                            
                            Archives
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                            <i class="fa fa-bookmark "></i>
                            
                            Categories
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-about " href="/about" >
                            <i class="fa fa-user "></i>
                            
                            About
                        </a>
                    </li>
                
                    <li>
                        <a class="menu-search modal-trigger " href="#search" >
                            <i class="fa fa-search "></i>
                            
                            Search
                        </a>
                    </li>
                
            </ul>
            <div>
    <ul class="side-nav indigo darken-1" id="main-menu">
        
        <li class="side-user">
            <div class="row">
                <div class="col s4 no-padding">
                    <img class="avatar-image circle responsive-img" src="https://avatars2.githubusercontent.com/u/4667563?v=3&amp;u=cfebb19866a76b9f7e6e55a010f0fe96634168fd&amp;s=400" alt="User Avatar">
                </div>
                <div class="info col s8 valign-wrapper no-padding">
                    <div class="valign">
                        <p class="name">Kyle Bai</p>
                        <p class="desc">悲慘研替攻陳屍中....</p>
                    </div>
                </div>
            </div>
        </li>
        

        
            <li class="no-padding">
                <a class="waves-effect menu-home " href="/" >
                    <i class="fa fa-home "></i>
                    
                    Home
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-archive " href="/archives" >
                    <i class="fa fa-archive "></i>
                    
                    Archives
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-category category-menu" href="javascript:;" data-activates="category-menu" >
                    <i class="fa fa-bookmark "></i>
                    
                    Categories
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-about " href="/about" >
                    <i class="fa fa-user "></i>
                    
                    About
                </a>
            </li>
        
            <li class="no-padding">
                <a class="waves-effect menu-search modal-trigger " href="#search" >
                    <i class="fa fa-search "></i>
                    
                    Search
                </a>
            </li>
        
    </ul>

    <ul class="side-nav indigo darken-1" id="category-menu">
    

            

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Blockchain/">
                    Blockchain <span class="right">4</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Ceph/">
                    Ceph <span class="right">9</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Spark/">
                    Spark <span class="right">10</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/DevOps/">
                    DevOps <span class="right">13</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Container/">
                    Container <span class="right">8</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Kubernetes/">
                    Kubernetes <span class="right">24</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Golang/">
                    Golang <span class="right">1</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/iOS/">
                    iOS <span class="right">1</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Programming/">
                    Programming <span class="right">1</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/OpenStack/">
                    OpenStack <span class="right">7</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/TensorFlow/">
                    TensorFlow <span class="right">4</span></a>
                </a>
            </li>

        

            <li class="collapse-level-0" collapse-level="0">
                <a class="no-padding" href="/categories/Linux/">
                    Linux <span class="right">12</span></a>
                </a>
            </li>

        

    </ul>
</div>

        </div>
    </div>
</nav>

<div id="search" class="modal search-modal">
    <div class="row">
        <div class="input-field col s12">
              <input id="search-input" type="text">
              <label for="search-input">Search</label>
        </div>

    </div>
    <div id="search-result" class="search-result col s12">

    </div>
</div>


    <main>
        <div class="container main-container">
    <nav class="page-nav hide-on-small-only">
    <div class="nav-wrapper indigo">
        <span class="breadcrumb">Current page(Categories)</span>
        
            
    
    
    <a class="breadcrumb" href="/categories/iOS/">iOS</a>


        

        
    </div>
</nav>

<article>
    <div class="card">
        <div class="card-content">
            

            <div class="article-title">
                
    
        <h1>NYTime Objective-C 程式規範</h1>
    


            </div>
            <time class="green-link-context" datetime="2013-11-03T04:23:01.000Z"><a href="/2013/11/03/msic/ios-code-style/">2013-11-03</a></time>

            <span id="busuanzi_container_page_pv" class="read-times-container">
    <i class="fa fa-eye"></i>
    <span id="busuanzi_value_page_pv"></span>
</span>

            
    <div class="tags-row">
        
            <a href="/tags/iOS/" class="chip pink lighten-1">iOS</a>
        
            <a href="/tags/Programming/" class="chip pink lighten-1">Programming</a>
        
    </div>


            <div class="toc green-link-context hide-on-med-and-down">
    <ol class="section table-of-contents"><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#點語法"><span class="section table-of-contents-text">點語法</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#間距"><span class="section table-of-contents-text">間距</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#條件判斷"><span class="section table-of-contents-text">條件判斷</span></a><ol class="section table-of-contents-child"><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#三元運算式"><span class="section table-of-contents-text">三元運算式</span></a></li></ol></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#Switch-case"><span class="section table-of-contents-text">Switch case</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#錯誤處理"><span class="section table-of-contents-text">錯誤處理</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#方法"><span class="section table-of-contents-text">方法</span></a></li><li class="section table-of-contents-item section table-of-contents-level-2"><a class="section table-of-contents-link" href="#變數"><span class="section table-of-contents-text">變數</span></a><ol class="section table-of-contents-child"><li class="section table-of-contents-item section table-of-contents-level-4"><a class="section table-of-contents-link" href="#變數屬性限制"><span class="section table-of-contents-text">變數屬性限制</span></a></li></ol></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#命名"><span class="section table-of-contents-text">命名</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#註解"><span class="section table-of-contents-text">註解</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#init-和-dealloc"><span class="section table-of-contents-text">init 和 dealloc</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#字面變數"><span class="section table-of-contents-text">字面變數</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#CGRect函式"><span class="section table-of-contents-text">CGRect函式</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#常數"><span class="section table-of-contents-text">常數</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#枚舉類型"><span class="section table-of-contents-text">枚舉類型</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#位元碼"><span class="section table-of-contents-text">位元碼</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#私有屬性"><span class="section table-of-contents-text">私有屬性</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#圖片命名"><span class="section table-of-contents-text">圖片命名</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#布林"><span class="section table-of-contents-text">布林</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#單一實例"><span class="section table-of-contents-text">單一實例</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#Xcode"><span class="section table-of-contents-text">Xcode</span></a></li><li class="section table-of-contents-item section table-of-contents-level-3"><a class="section table-of-contents-link" href="#其他Objective-C風格指南"><span class="section table-of-contents-text">其他Objective-C風格指南</span></a></li></ol></li></ol>
</div>


            <div class="entry green-link-context">
                <p>Objective-C 程式規範，參考於紐約時報所規範之程式風格。</p>
<p><img src="/images/msic/objc.png" alt=""></p>
<a id="more"></a>
<h2 id="點語法"><a href="#點語法" class="headerlink" title="點語法"></a>點語法</h2><p> 始终使用點語法來存取<strong>屬性</strong>，存取其他實例時應用<strong>中括號[]</strong>。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">view.backgroundColor = [UIColor orangeColor];
[UIApplication sharedApplication].delegate;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">[view setBackgroundColor:[UIColor orangeColor]];
UIApplication.sharedApplication.delegate;
</code></pre>
<h2 id="間距"><a href="#間距" class="headerlink" title="間距"></a>間距</h2><ul>
<li>永遠不要使用制表符號（tab）間隔。確保在Xcode 中設定了此偏好。</li>
<li>方法的大括號和其他的大括號（<code>if</code>/<code>else</code>/<code>switch</code>/<code>while</code> 等等）始終和宣告在同一行開始，在新的一行結束。</li>
</ul>
<p><strong>建議：</strong></p>
<pre><code class="objc">if (user.isHappy) {
// Do something
}
else {
// Do something else
}
</code></pre>
<ul>
<li>方法之間空格一行，這樣有助於視覺的清晰度和程式碼組織性。在方法中的功能區塊之間應該使用空白分開，但往往可能建立一個新的方法。</li>
<li><code>@synthesize</code> 和 <code>@dynamic</code> 在實現中都須佔一個新行。</li>
</ul>
<h2 id="條件判斷"><a href="#條件判斷" class="headerlink" title="條件判斷"></a>條件判斷</h2><p>條件判斷主要部分不需使用大括號來防止<a href="https://github.com/NYTimes/objective-c-style-guide/issues/26#issuecomment-22074256" target="_blank" rel="noopener">出錯</a>。這些錯誤包含添加第二行(程式碼)，並希望它是if 語法的一部分時。還有另外一種<a href="http://programmers.stackexchange.com/a/16530" target="_blank" rel="noopener">更危險的</a>，當 if 語法裡面的一行被註解掉，下一行就會在不經意間成為了這個 if 語法的一部分。此外，這種風格也更符合所有其他的條件判斷，因此也更容易檢查。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">if (!error) {
    return success;
}
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">if (!error)
    return success;
</code></pre>
<p>或</p>
<pre><code class="objc">if (!error) return success;
</code></pre>
<h3 id="三元運算式"><a href="#三元運算式" class="headerlink" title="三元運算式"></a>三元運算式</h3><p>三元運算式以 (<strong>條件</strong>) ? <strong>成立</strong> : <strong>不成立</strong>;</p>
<p>只有當它可以增加程式碼清晰度或整潔時才使用。單一的條件都應該優先考虑使用。多條件時通常使用 if 會更好懂，或者重構成實體變數。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">result = (a &gt; b) ? x : y;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">result = a &gt; b ? x = c &gt; d ? c : d : y;
</code></pre>
<h2 id="Switch-case"><a href="#Switch-case" class="headerlink" title="Switch case"></a>Switch case</h2><p>由於使用Switch case會針對所有條件是進行處理，需針對所有條件實現，以及用區塊對case做工作區別，確保區塊的正確需給予一項約束：</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">MyEnum types = MyEnumValueA;

switch (types) {
    case MyEnumValueA:{
        break;
    }
    case MyEnumValueB: {
        break;
    }
    case MyEnumValueC: {
        break;
    }
    default: {

    }
}
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">int types = 0;

switch (types) {
    case 0:
        break;
    case 1:
        break;
    case 2:
        break;
    default:
}
</code></pre>
<h2 id="錯誤處理"><a href="#錯誤處理" class="headerlink" title="錯誤處理"></a>錯誤處理</h2><p>當引用一個回傳錯誤參數（error parameter）的方法時，應該針對回傳值，而非錯誤變數。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">NSError *error;
if (![self trySomethingWithError:&amp;error]) {
    // 錯誤處理
}
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">NSError *error;
[self trySomethingWithError:&amp;error];
if (error) {
    // 錯誤處理
}
</code></pre>
<p>一些Apple的API在成功的情况下會寫一些垃圾值给錯誤參數(如果非空)，所以針對錯誤變數可能會造成虛假结果 (或者崩溃)。</p>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>方法宣告中，在 -/+ 符號後應該有一個空格。方法片段之間也應該有一個空格。</p>
<p><strong>建議：</strong></p>
<pre><code>- (void)setExampleText:(NSString *)text image:(UIImage *)image;
</code></pre><h2 id="變數"><a href="#變數" class="headerlink" title="變數"></a>變數</h2><p>變數名稱應該盡可能命名具有描述性。除了 <code>for()</code> 迴圈外，其他情况都應該避免使用單字母的變數名。<br>星號表示指標變數，例如：<code>NSString *text</code> 不要寫成 <code>NSString* text</code> 或者 <code>NSString * text</code> ，常數除外。<br>盡量定義屬性來取代直接使用實體變數。除了初始化方法（<code>init</code>， <code>initWithCoder:</code>等）， <code>dealloc</code> 方法和自定義的setters和 getters内部，應避免直接存取實體變數。更多有關在初始化方法和 dealloc方法中使用存取器方法的資訊，可參考<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6" target="_blank" rel="noopener">這邊</a>。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">@interface NYTSection: NSObject

@property (nonatomic) NSString *headline;

@end
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">@interface NYTSection : NSObject {
    NSString *headline;
}

@property (nonatomic) NSString* string;
</code></pre>
<h4 id="變數屬性限制"><a href="#變數屬性限制" class="headerlink" title="變數屬性限制"></a>變數屬性限制</h4><p>當涉及到<a href="(https://developer.apple.com/library/ios/releasenotes/objectivec/rn-transitioningtoarc/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW4)">ARC</a>變數屬性限制時，<br>限制保留字 (<code>__strong</code>, <code>__weak</code>, <code>__unsafe_unretained</code>, <code>__autoreleasing</code>) 應該位於Class與變數名稱之間，如：<code>NSString * __weak text</code>。</p>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><p>盡可能遵照Apple的命名法則，尤其那些涉及到<a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html" target="_blank" rel="noopener">記憶體管理規範</a>，（<a href="http://stackoverflow.com/a/2865194/340508" target="_blank" rel="noopener">NonARC</a>）的。</p>
<p><strong>長一點</strong>和<strong>描述性</strong>的方法名稱和變數名稱都不错。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">UIButton *settingsButton;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">UIButton *setBut;
</code></pre>
<p>類別名稱和常數名稱應該使用三個字母當開頭（例如 <code>KRT</code>），但 Core Data 實體名稱可以省略。為了程式碼的乾淨，常數應該使用相關類別的名字作為開頭，並使用駝峰式命名法。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">static const NSTimeInterval NYTArticleViewControllerNavigationFadeAnimationDuration = 0.3;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">static const NSTimeInterval fadetime = 1.7;
</code></pre>
<p><strong>屬性</strong>和<strong>區域變數</strong>應該使用<strong>駝峰式命名法</strong>，並且首字母小寫。</p>
<p>為了保持一致，實體變數應該使用駝峰式命名，且首字母小寫，以下底線為開頭。這是<strong>LLVM</strong>的自動合成的實體變數一致。<br><strong>如果LLVM可以自動合成變數，那就讓它自動合成吧。</strong></p>
<p><strong>建議：</strong></p>
<pre><code class="objc">@synthesize descriptiveVariableName = _descriptiveVariableName;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">id varnm;
</code></pre>
<h3 id="註解"><a href="#註解" class="headerlink" title="註解"></a>註解</h3><p>當需要的时候，註解應該被用來解释 <strong>為什麼</strong> 特定程式做了某些事情。所使用之任何註解必須保持最新，否則就刪掉。</p>
<p>通常應避免一大塊註解，程式碼應該盡量作為自身的檔案，只需要隔幾行寫幾句說明。這並不適用於那些用來生成檔案的註解。</p>
<h3 id="init-和-dealloc"><a href="#init-和-dealloc" class="headerlink" title="init 和 dealloc"></a>init 和 dealloc</h3><p><code>dealloc</code> 方法應該放在<strong>實作檔</strong>最上面，並且剛好在 <code>@synthesize</code> 和 <code>@dynamic</code> 保留字的後面。在任何類別中，<code>init</code> 都應該直接放在 <code>dealloc</code> 方法的下方。</p>
<p><code>init</code> 方法的結構應該像這樣：</p>
<pre><code class="objc">- (instancetype)init {
    self = [super init]; // 呼叫指定的初始化方法
    if (self) {
        // Custom initialization
    }
    return self;
}
</code></pre>
<h3 id="字面變數"><a href="#字面變數" class="headerlink" title="字面變數"></a>字面變數</h3><p>當創建 <code>NSString</code>， <code>NSDictionary</code>， <code>NSArray</code>，和 <code>NSNumber</code> 物件的不可變實體時，都應該使用字面量。要注意 <code>nil</code> 值不能傳給 <code>NSArray</code> 和 <code>NSDictionary</code> 字面變數，這樣做會導致崩潰。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">NSArray *names = @[@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;, @&quot;Alex&quot;, @&quot;Steve&quot;, @&quot;Paul&quot;];
NSDictionary *productManagers = @{@&quot;iPhone&quot; : @&quot;Kate&quot;, @&quot;iPad&quot; : @&quot;Kamal&quot;, @&quot;Mobile Web&quot; : @&quot;Bill&quot;};
NSNumber *shouldUseLiterals = @YES;
NSNumber *buildingZIPCode = @10018;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">NSArray *names = [NSArray arrayWithObjects:@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;, @&quot;Alex&quot;, @&quot;Steve&quot;, @&quot;Paul&quot;, nil];
NSDictionary *productManagers = [NSDictionary dictionaryWithObjectsAndKeys: @&quot;Kate&quot;, @&quot;iPhone&quot;, @&quot;Kamal&quot;, @&quot;iPad&quot;, @&quot;Bill&quot;, @&quot;Mobile Web&quot;, nil];
NSNumber *shouldUseLiterals = [NSNumber numberWithBool:YES];
NSNumber *buildingZIPCode = [NSNumber numberWithInteger:10018];
</code></pre>
<h3 id="CGRect函式"><a href="#CGRect函式" class="headerlink" title="CGRect函式"></a>CGRect函式</h3><p>當存取一個 <code>CGRect</code> 的 <code>x</code>， <code>y</code>， <code>width</code>， <code>height</code> 时，應該使用<a href="http://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html" target="_blank" rel="noopener"><code>CGGeometry</code> 函式</a>取代直接存取結構體成員。Apple的 <code>CGGeometry</code> 参考中說到：</p>
<blockquote>
<p>All functions described in this reference that take CGRect data structures as inputs implicitly standardize those rectangles before calculating their results. For this reason, your applications should avoid directly reading and writing the data stored in the CGRect data structure. Instead, use the functions described here to manipulate rectangles and to retrieve their characteristics.</p>
</blockquote>
<p><strong>建議：</strong></p>
<pre><code class="objc">CGRect frame = self.view.frame;

CGFloat x = CGRectGetMinX(frame);
CGFloat y = CGRectGetMinY(frame);
CGFloat width = CGRectGetWidth(frame);
CGFloat height = CGRectGetHeight(frame);
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">CGRect frame = self.view.frame;

CGFloat x = frame.origin.x;
CGFloat y = frame.origin.y;
CGFloat width = frame.size.width;
CGFloat height = frame.size.height;
</code></pre>
<h3 id="常數"><a href="#常數" class="headerlink" title="常數"></a>常數</h3><p>常數使用字元、字串 字面變數或數值變數，因為常數可以輕易重用，且可以快速改變而不需要查找和替換。常數應該宣告為 <code>static</code> 常數而不是 <code>#define</code> ，除非很明確的要當做marco來使用。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">static NSString * const NYTAboutViewControllerCompanyName = @&quot;The New York Times Company&quot;;

static const CGFloat NYTImageThumbnailHeight = 50.0;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">#define CompanyName @&quot;The New York Times Company&quot;

#define thumbnailHeight 2
</code></pre>
<h3 id="枚舉類型"><a href="#枚舉類型" class="headerlink" title="枚舉類型"></a>枚舉類型</h3><p>當使用 <code>enum</code> 時，建議使用新的基礎類型規範，因為它具有更强的類型檢查和程式碼補全功能。現在的SDK 包含了一個marco來建議使用者利用新的基礎類型 - <code>NS_ENUM()</code></p>
<p><strong>建議：</strong></p>
<pre><code class="objc">typedef NS_ENUM(NSInteger, NYTAdRequestState) {
    NYTAdRequestStateInactive,
    NYTAdRequestStateLoading
};
</code></pre>
<h3 id="位元碼"><a href="#位元碼" class="headerlink" title="位元碼"></a>位元碼</h3><p>當用到位元碼時，使用 <code>NS_OPTIONS</code> marco。</p>
<p><strong>舉例：</strong></p>
<pre><code class="objc">typedef NS_OPTIONS(NSUInteger, NYTAdCategory) {
    NYTAdCategoryAutos      = 1 &lt;&lt; 0,
    NYTAdCategoryJobs       = 1 &lt;&lt; 1,
    NYTAdCategoryRealState  = 1 &lt;&lt; 2,
    NYTAdCategoryTechnology = 1 &lt;&lt; 3
};
</code></pre>
<h3 id="私有屬性"><a href="#私有屬性" class="headerlink" title="私有屬性"></a>私有屬性</h3><p>私有屬性應該宣告在類別實作檔的延展(匿名的類目)中。有名字的類目(例如 <code>NYTPrivate</code> 或 <code>private</code>) 永遠都不應該使用，除非要擴展其他類別。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">@interface NYTAdvertisement ()

@property (nonatomic, strong) GADBannerView *googleAdView;
@property (nonatomic, strong) ADBannerView *iAdView;
@property (nonatomic, strong) UIWebView *adXWebView;

@end
</code></pre>
<h3 id="圖片命名"><a href="#圖片命名" class="headerlink" title="圖片命名"></a>圖片命名</h3><p>圖片名稱應該被統一命名，以保持組織的完整。它們應該被命名為一個說明它們<strong>用途的駝峰式字串</strong>，其次是自定義類別或屬性的無前綴名字（如果有的話），然後進一步說明<strong>顏色</strong>與<strong>對應的解析度識別(ex:iPhone 6 and iPhone 5為@2x)</strong>或 <strong>圖片展示位置</strong>，最後是它們的<strong>狀態</strong>。</p>
<p><strong>建議：</strong></p>
<ul>
<li><code>RefreshBarButtonItem</code> / <code>RefreshBarButtonItem@2x</code> 和 <code>RefreshBarButtonItemSelected</code> / <code>RefreshBarButtonItemSelected@2x</code></li>
<li><code>ArticleNavigationBarWhite</code> / <code>ArticleNavigationBarWhite@2x</code> 和 <code>ArticleNavigationBarBlackSelected</code> / <code>ArticleNavigationBarBlackSelected@2x</code>.</li>
</ul>
<p><a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconMatrix.html" target="_blank" rel="noopener">對應的解析度識別</a></p>
<p>圖片目錄中被用於類似目地的圖片應歸入各自組中。<br>最後確保圖片存放於<strong>Images.xcassets</strong>。</p>
<h3 id="布林"><a href="#布林" class="headerlink" title="布林"></a>布林</h3><p>因為 <code>nil</code> 解析為 <code>NO</code>，所以没有必要在條件中與它進行比較。永遠不要直接和 <code>YES</code> 進行比較，因為 <code>YES</code> 被定義為 1，而 <code>BOOL</code> 可以多達八位元。</p>
<p>這使得整個檔案有更多的一致性和更大的視覺清晰度。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">if (!someObject) {
}
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">if (someObject == nil) {
}
</code></pre>
<p><strong>對於 <code>BOOL</code> 來說, 這有兩種用法:</strong></p>
<pre><code class="objc">if (isAwesome)
if (![someObject boolValue])
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">if ([someObject boolValue] == NO)
if (isAwesome == YES) // 絕對不要這麼做
</code></pre>
<p>如果一個 <code>BOOL</code> 屬性名稱是一個形容詞，屬性可以省略 “is” 前缀，但為 get 存取器指定一個慣用的名稱，例如：</p>
<pre><code class="objc">@property (assign, getter=isEditable) BOOL editable;
</code></pre>
<p>內容和範例來自 <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html#//apple_ref/doc/uid/20001284-BAJGIIJE" target="_blank" rel="noopener">Cocoa 命名指南</a> 。</p>
<h3 id="單一實例"><a href="#單一實例" class="headerlink" title="單一實例"></a>單一實例</h3><p>單例對象應該使用執行緒安全的模式創建共享的實例。</p>
<pre><code class="objc">+ (instancetype)sharedInstance {
   static id sharedInstance = nil;

   static dispatch_once_t onceToken;
   dispatch_once(&amp;onceToken, ^{
      sharedInstance = [[self alloc] init];
   });

   return sharedInstance;
}
</code></pre>
<p>這將會預防<a href="http://cocoasamurai.blogspot.com/2011/04/singletons-your-doing-them-wrong.html" target="_blank" rel="noopener">有時可能產生的許多崩潰</a>。</p>
<h3 id="Xcode"><a href="#Xcode" class="headerlink" title="Xcode"></a>Xcode</h3><p>为了避免檔案複雜，實體檔案與目錄應該保持與Xcode同步。Xcode 建立的任何群組（group）都必须在檔案系统有相應的映射。為了更清晰，程式碼不僅應該按照<strong>類型</strong>進行分组，也可以根據<strong>功能</strong>進行分组。</p>
<p><img src="/images/msic/code_group.png" alt=""></p>
<p>如果可以的話，盡可能一直打開 target Build Settings 中 “Treat Warnings as Errors” 以及一些<a href="http://boredzo.org/blog/archives/2009-11-07/warnings" target="_blank" rel="noopener">額外的警告</a>。如果你需要忽略指定的警告,使用 <a href="http://clang.llvm.org/docs/UsersManual.html#controlling-diagnostics-via-pragmas" target="_blank" rel="noopener">Clang 的編譯特性</a> 。</p>
<h3 id="其他Objective-C風格指南"><a href="#其他Objective-C風格指南" class="headerlink" title="其他Objective-C風格指南"></a>其他Objective-C風格指南</h3><ul>
<li><a href="http://google-styleguide.googlecode.com/svn/trunk/objcguide.xml" target="_blank" rel="noopener">Google</a></li>
<li><a href="https://github.com/github/objective-c-conventions" target="_blank" rel="noopener">GitHub</a></li>
<li><a href="https://trac.adium.im/wiki/CodingStyle" target="_blank" rel="noopener">Adium</a></li>
<li><a href="https://gist.github.com/soffes/812796" target="_blank" rel="noopener">Sam Soffes</a></li>
<li><a href="http://cocoadevcentral.com/articles/000082.php" target="_blank" rel="noopener">CocoaDevCentral</a></li>
<li><a href="http://lukeredpath.co.uk/blog/my-objective-c-style-guide.html" target="_blank" rel="noopener">Luke Redpath</a></li>
<li><a href="http://www.cimgf.com/zds-code-style-guide/" target="_blank" rel="noopener">Marcus Zarra</a></li>
</ul>

                
<p class="green-link-context">
    <a href="/2014/06/03/msic/oop/" rel="next" title="基本物件導向概念">
    Prev: 基本物件導向概念
  </a>
</p>




            </div>
			
        </div>
    </div>
</article>




    <section id="comment">
        <div id="disqus_thread"></div>
        <script>
            var url_parts = window.location.href.split("?");
            var disqus_url = url_parts[0];
            (function() {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = "//ky1ebai.disqus.com/embed.js";
                dsq.setAttribute('data-timestamp', + new Date());
                (document.head || d.body ).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the
            <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
        </noscript>
    </section>



</div>

        <div class="fixed-action-btn float-sitemap">
    <a class="btn-floating btn-large pink">
      <i class="fa fa-caret-square-o-up"></i>
    </a>
    <ul>
      <li><a class="btn-return-top btn-floating waves-effect green" title="Return to top"><i class="fa fa-arrow-circle-o-up"></i></a></li>
      <li><a class="btn-floating waves-effect button-collapse yellow darken-1"  data-activates="main-menu" title="menu"><i class="fa fa-navicon"></i></a></li>
    </ul>
  </div>

    </main>
    <footer class="page-footer black darken-1">
    
    <div class="container">
        <div class="row">
            
            <div class="social-group col m4 s12">
                <h5 class="white-text">Social</h5>
                
                    <a class="social-link" href="https://www.facebook.com/kyle.bai6054" target="_blank">
                        <i class="fa fa-2x fa-facebook-official"></i>
                    </a>
                
                    <a class="social-link" href="https://github.com/kairen" target="_blank">
                        <i class="fa fa-2x fa-github"></i>
                    </a>
                
                    <a class="social-link" href="mailto:k2r2bai@gmail.com" target="_blank">
                        <i class="fa fa-2x fa-envelope"></i>
                    </a>
                
                    <a class="social-link" href="/atom.xml" target="_blank">
                        <i class="fa fa-2x fa-rss"></i>
                    </a>
                
                <div class="site-visitors-container white-text">
                    <span>
                    </span>
                    <span>&nbsp;Welcome to contact me!&nbsp;</span>
                    <span>
                    </span>
                </div>
            </div>
            

            
            <div class="col m8 s12">
                <h5 class="white-text">Links</h5>
                
                    <a class="social-link" href="https://github.com/OSE-Lab" target="_blank">OSE-Lab</a>
                
                    <a class="social-link" href="https://www.gitbook.com/@kairen" target="_blank">GitBook</a>
                
            </div>
            
        </div>
    </div>
    

    <div class="footer-copyright green-link-context">
        <div class="container">
            © 2015 KaiRen, All rights reserved.
            <p class="right" style="margin-top: 0;">Blog powered by <a href="https://hexo.io">Hexo</a> | Theme <a href="https://github.com/raytaylorlin/hexo-theme-raytaylorism">raytaylorism</a></p>
        </div>
    </div>
</footer>


    <noscript>
    <div class="noscript">
        <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
    </div>
</noscript>
<div class="noscript">
    <p class="center-align">当前网速较慢或者你使用的浏览器不支持博客特定功能，请尝试刷新或换用Chrome、Firefox等现代浏览器</p>
</div>


<script src="/js/jquery.min.js"></script>
<script src="/js/materialize.min.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
    (function($) {
        $(document).ready(function() {
            // 隐藏禁用javascript（针对微信内置浏览器）的提示
            $('.noscript').hide();

            // 图片缩放效果
            var $imgs = $('img').not('.slider-image').not('.avatar-image').not('.carousel-image').not('.card-cover-image').not('.qrcode');

            // 给图片加上点击放大效果（materialbox插件）
            $imgs.addClass('materialboxed').each(function(i, el) {
                $(this).attr('data-caption', $(this).attr('alt') || ' ');
            }).materialbox();

            // 优化表格的显示
            $('table').each(function() {
                var $table = $(this);
                // 除去多行代码的情况
                if ($table.find('pre').length == 0) {
                    $table.addClass('responsive-table striped bordered');
                }
            });

            // 首页幻灯片
            $('.slider').slider({indicators: true, full_width: true, interval: 8000});

            $(".button-collapse").sideNav();
            $(".category-menu").sideNav();

            // 针对gallery post
            $('.carousel').carousel({full_width: true});
            $('.carousel-control.prev').click(function() {
                $('.carousel').carousel('prev');
            });
            $('.carousel-control.next').click(function() {
                $('.carousel').carousel('next');
            });

            // 文章目录
            $('article').not('.simple-article').find('h1').add('h2').add('h3').add('h4').add('h5').add('h6').scrollSpy();

            // 目录随屏幕滚动（防止目录过长越过footer）
            var $toc = $('.toc');
            var scrollTargetTop = 0;
            $(window).scroll(function() {
                var $activeLink = $toc.find('a.active.section');
                if ($(window).scrollTop() < 100) {
                    scrollTargetTop = 0;
                } else {
                    if ($activeLink[0]) {
                        scrollTargetTop = $activeLink.offset().top - $toc.offset().top;
                    }
                }
                $toc.css('top', '-' + scrollTargetTop + 'px');
            });

            // 修正文章目录的left-border颜色
            var color = $('.table-of-contents-text').css('color');
            $('.table-of-contents-link').css('border-left-color', color);

            // 针对移动端做的优化：FAB按钮点击一下收回
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                $('.fixed-action-btn').addClass('click-to-toggle');
            }
            // 回到顶部
            $('.btn-return-top').click(function() {
                $('body, html').animate({
                    scrollTop: 0
                }, 500);
            });

            // 重置读书页面的Tab标签页的颜色
            $('li.tab a').hover(function() {
                $(this).toggleClass('text-lighten-4');
            });
            $('.indicator').addClass('pink lighten-2');

            
            // 添加new标签
            $('.menu-home').append('<span class="new badge pink"></span>');
            

            // 搜索功能
            $('.modal-trigger').leanModal({
                // 打开搜索框时自动聚焦
                ready: function() {
                    if ($('#search').is(":visible")) {
                        $('#search-input').focus();
                    }
                }
            });
            var searchXml = "search.xml";
            if (searchXml.length == 0) {
             	searchXml = "search.xml";
            }
            var searchPath = "/" + searchXml;
            initSearch(searchPath, 'search-input', 'search-result');
        });

        // 初始化搜索与匹配函数
        var initSearch = function(path, search_id, content_id) {
            'use strict';
            $.ajax({
                url: path,
                dataType: "xml",
                success: function(xmlResponse) {
                    // get the contents from search data
                    var datas = $("entry", xmlResponse).map(function() {
                        return {
                            title: $("title", this).text(),
                            content: $("content", this).text(),
                            url: $("url", this).text()
                        };
                    }).get();
                    var $input = document.getElementById(search_id);
                    var $resultContent = document.getElementById(content_id);
                    $input.addEventListener('input', function() {
                        var str = '<ul class=\"search-result-list\">';
                        var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                        $resultContent.innerHTML = "";
                        if (this.value.trim().length <= 0) {
                            return;
                        }
                        // perform local searching
                        datas.forEach(function(data) {
                            var isMatch = true;
                            var content_index = [];
                            var data_title = data.title.trim().toLowerCase();
                            var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                            var data_url = data.url;
                            var index_title = -1;
                            var index_content = -1;
                            var first_occur = -1;
                            // only match artiles with not empty titles and contents
                            if (data_title != '' && data_content != '') {
                                keywords.forEach(function(keyword, i) {
                                    index_title = data_title.indexOf(keyword);
                                    index_content = data_content.indexOf(keyword);
                                    if (index_title < 0 && index_content < 0) {
                                        isMatch = false;
                                    } else {
                                        if (index_content < 0) {
                                            index_content = 0;
                                        }
                                        if (i == 0) {
                                            first_occur = index_content;
                                        }
                                    }
                                });
                            }
                            // show search results
                            if (isMatch) {
                                keywords.forEach(function(keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    data_title = data_title.replace(regS, "<span class=\"search-keyword green lighten-2\">" + keyword + "</span>");
                                });

                                str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                                var content = data.content.trim().replace(/<[^>]+>/g, "");
                                if (first_occur >= 0) {
                                    // cut out 100 characters
                                    var start = first_occur - 20;
                                    var end = first_occur + 80;
                                    if (start < 0) {
                                        start = 0;
                                    }
                                    if (start == 0) {
                                        end = 100;
                                    }
                                    if (end > content.length) {
                                        end = content.length;
                                    }
                                    var match_content = content.substring(start, end);
                                    // highlight all keywords
                                    keywords.forEach(function(keyword) {
                                        var regS = new RegExp(keyword, "gi");
                                        match_content = match_content.replace(regS, "<span class=\"search-keyword green lighten-2\">" + keyword + "</span>");
                                    });

                                    str += "<p class=\"search-result\">..." + match_content + "...</p>"
                                }
                                str += "</li>";
                            }
                        });
                        str += "</ul>";
                        $resultContent.innerHTML = str;
                    });
                }
            });
        }
    })(jQuery);
</script>


<script src="/js/prettify.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("pre").addClass("prettyprint");
        prettyPrint();
    });
</script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>



</body>
</html>
