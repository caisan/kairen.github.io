<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />

    

    

    <title>NYTime Objective-C 程式規範 | KaiRen&#39;s Blog</title>
    <meta name="author" content="Kyle Bai" />
    <meta name="version" content="1.0.0" />
    <meta name="keywords" content="undefined" />
    <meta name="description" content="Objective-C 程式規範，參考於紐約時報所規範之程式風格。


點語法 始终使用點語法來存取屬性，存取其他實例時應用中括號[]。
建議：
view.backgroundColor = [UIColor orangeColor];
[UIApplication sharedApplication].delegate;

反對：
[view setBackgroundColor:[UIColor orangeColor]];
UIApplication.sharedApplication.d" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <meta name="baidu-site-verification" content="F0CXvmUgA9" />

    
    
    <link rel="icon" href="/images/favicon.png">
    

    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <div class="app">
        <header class="header clearfix">
    <div id="nav" class="nav">
    <button id="open-panel" class="open-panel"><i class="icon-library"></i></button>

    <nav class="nav-inner">

        
        
        <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/categories">Category</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/archives">Archive</a>
        </li>
        
        
        
        <li class="nav-item nav-item-tag">
            <a id="nav-tag" class="nav-link" href="#">Tag</a>
            <div id="nav-tags" class="nav-tag-wrap">
                <i class="nav-tag-arrow"></i>
                
  <div class="widget-wrap">
    <h3 class="widget-title">
        <i class="icon-tag vm"></i>
        <span class="vm">Tags</span>
    </h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/">AWS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ansible/">Ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Automation-Engine/">Automation Engine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bare-Metal/">Bare Metal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bare-metal/">Bare-metal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blockchain/">Blockchain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BlueStore/">BlueStore</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CNCF/">CNCF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Calico/">Calico</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ceph/">Ceph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Concurrent/">Concurrent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Container/">Container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CoreOS/">CoreOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DC-OS/">DC/OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DL-ML/">DL/ML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Collect/">Data Collect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DevOps/">DevOps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DevStack/">DevStack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Distribution-System/">Distribution System</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker-Swarm/">Docker Swarm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker-registry/">Docker registry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ethereum/">Ethereum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Federation/">Federation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/File-System/">File System</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/">GPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Go-lang/">Go lang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/">Golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDFS/">HDFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP-Server/">HTTP Server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Helm/">Helm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/High-Availability/">High Availability</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/">Kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Keystone/">Keystone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kops/">Kops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/">Kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes-RBAC/">Kubernetes RBAC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LDAP/">LDAP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux-Container/">Linux Container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LinuxKit/">LinuxKit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Load-Balancer/">Load Balancer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Logging/">Logging</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-Learning/">Machine Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mesos/">Mesos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Message-Queue/">Message Queue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Microkernel/">Microkernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Moby/">Moby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Monitoring/">Monitoring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NVIDIA-GPU/">NVIDIA GPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NoSQL/">NoSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/">OOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS-X/">OS X</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenStack/">OpenStack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openstack/">Openstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PXE/">PXE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Programming/">Programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prometheus/">Prometheus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Puppet/">Puppet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPDK/">SPDK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSD/">SSD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Smart-Contract/">Smart Contract</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Solidity/">Solidity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spark/">Spark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Storage/">Storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/">TensorFlow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vagrant/">Vagrant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visualization/">Visualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
    </div>
  </div>


            </div>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/about">About</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/atom.xml">Feed</a>
        </li>
        
        
        

    </nav>
</div>

    <aside id="aside" class="aside">
    <div id="aside-mask" class="aside-mask"></div>
    <div id="aside-inner" class="aside-inner">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="https://kairen.github.io"></form>

        
        
        
        

        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#點語法"><span class="toc-number">1.</span> <span class="toc-text">點語法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#間距"><span class="toc-number">2.</span> <span class="toc-text">間距</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#條件判斷"><span class="toc-number">3.</span> <span class="toc-text">條件判斷</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#三元運算式"><span class="toc-number">3.1.</span> <span class="toc-text">三元運算式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Switch-case"><span class="toc-number">4.</span> <span class="toc-text">Switch case</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#錯誤處理"><span class="toc-number">5.</span> <span class="toc-text">錯誤處理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法"><span class="toc-number">6.</span> <span class="toc-text">方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#變數"><span class="toc-number">7.</span> <span class="toc-text">變數</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#變數屬性限制"><span class="toc-number">7.0.1.</span> <span class="toc-text">變數屬性限制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#命名"><span class="toc-number">7.1.</span> <span class="toc-text">命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#註解"><span class="toc-number">7.2.</span> <span class="toc-text">註解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#init-和-dealloc"><span class="toc-number">7.3.</span> <span class="toc-text">init 和 dealloc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字面變數"><span class="toc-number">7.4.</span> <span class="toc-text">字面變數</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CGRect函式"><span class="toc-number">7.5.</span> <span class="toc-text">CGRect函式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常數"><span class="toc-number">7.6.</span> <span class="toc-text">常數</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#枚舉類型"><span class="toc-number">7.7.</span> <span class="toc-text">枚舉類型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#位元碼"><span class="toc-number">7.8.</span> <span class="toc-text">位元碼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#私有屬性"><span class="toc-number">7.9.</span> <span class="toc-text">私有屬性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#圖片命名"><span class="toc-number">7.10.</span> <span class="toc-text">圖片命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#布林"><span class="toc-number">7.11.</span> <span class="toc-text">布林</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#單一實例"><span class="toc-number">7.12.</span> <span class="toc-text">單一實例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Xcode"><span class="toc-number">7.13.</span> <span class="toc-text">Xcode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他Objective-C風格指南"><span class="toc-number">7.14.</span> <span class="toc-text">其他Objective-C風格指南</span></a></li></ol></li></ol>
        
    </div>
</aside>

</header>

        <div id="content" class="content"><article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            NYTime Objective-C 程式規範
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2013/11/03/msic/ios-code-style/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2013-11-03T04:23:01.000Z" itemprop="datePublished">2013-11-03</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/Programming/">Programming</a>, <a class="article-tag-link" href="/tags/iOS/">iOS</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <p>Objective-C 程式規範，參考於紐約時報所規範之程式風格。</p>
<p><img src="/images/msic/objc.png" alt=""></p>
<a id="more"></a>
<h2 id="點語法"><a href="#點語法" class="headerlink" title="點語法"></a>點語法</h2><p> 始终使用點語法來存取<strong>屬性</strong>，存取其他實例時應用<strong>中括號[]</strong>。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">view.backgroundColor = [UIColor orangeColor];
[UIApplication sharedApplication].delegate;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">[view setBackgroundColor:[UIColor orangeColor]];
UIApplication.sharedApplication.delegate;
</code></pre>
<h2 id="間距"><a href="#間距" class="headerlink" title="間距"></a>間距</h2><ul>
<li>永遠不要使用制表符號（tab）間隔。確保在Xcode 中設定了此偏好。</li>
<li>方法的大括號和其他的大括號（<code>if</code>/<code>else</code>/<code>switch</code>/<code>while</code> 等等）始終和宣告在同一行開始，在新的一行結束。</li>
</ul>
<p><strong>建議：</strong></p>
<pre><code class="objc">if (user.isHappy) {
// Do something
}
else {
// Do something else
}
</code></pre>
<ul>
<li>方法之間空格一行，這樣有助於視覺的清晰度和程式碼組織性。在方法中的功能區塊之間應該使用空白分開，但往往可能建立一個新的方法。</li>
<li><code>@synthesize</code> 和 <code>@dynamic</code> 在實現中都須佔一個新行。</li>
</ul>
<h2 id="條件判斷"><a href="#條件判斷" class="headerlink" title="條件判斷"></a>條件判斷</h2><p>條件判斷主要部分不需使用大括號來防止<a href="https://github.com/NYTimes/objective-c-style-guide/issues/26#issuecomment-22074256" target="_blank" rel="noopener">出錯</a>。這些錯誤包含添加第二行(程式碼)，並希望它是if 語法的一部分時。還有另外一種<a href="http://programmers.stackexchange.com/a/16530" target="_blank" rel="noopener">更危險的</a>，當 if 語法裡面的一行被註解掉，下一行就會在不經意間成為了這個 if 語法的一部分。此外，這種風格也更符合所有其他的條件判斷，因此也更容易檢查。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">if (!error) {
    return success;
}
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">if (!error)
    return success;
</code></pre>
<p>或</p>
<pre><code class="objc">if (!error) return success;
</code></pre>
<h3 id="三元運算式"><a href="#三元運算式" class="headerlink" title="三元運算式"></a>三元運算式</h3><p>三元運算式以 (<strong>條件</strong>) ? <strong>成立</strong> : <strong>不成立</strong>;</p>
<p>只有當它可以增加程式碼清晰度或整潔時才使用。單一的條件都應該優先考虑使用。多條件時通常使用 if 會更好懂，或者重構成實體變數。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">result = (a &gt; b) ? x : y;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">result = a &gt; b ? x = c &gt; d ? c : d : y;
</code></pre>
<h2 id="Switch-case"><a href="#Switch-case" class="headerlink" title="Switch case"></a>Switch case</h2><p>由於使用Switch case會針對所有條件是進行處理，需針對所有條件實現，以及用區塊對case做工作區別，確保區塊的正確需給予一項約束：</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">MyEnum types = MyEnumValueA;

switch (types) {
    case MyEnumValueA:{
        break;
    }
    case MyEnumValueB: {
        break;
    }
    case MyEnumValueC: {
        break;
    }
    default: {

    }
}
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">int types = 0;

switch (types) {
    case 0:
        break;
    case 1:
        break;
    case 2:
        break;
    default:
}
</code></pre>
<h2 id="錯誤處理"><a href="#錯誤處理" class="headerlink" title="錯誤處理"></a>錯誤處理</h2><p>當引用一個回傳錯誤參數（error parameter）的方法時，應該針對回傳值，而非錯誤變數。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">NSError *error;
if (![self trySomethingWithError:&amp;error]) {
    // 錯誤處理
}
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">NSError *error;
[self trySomethingWithError:&amp;error];
if (error) {
    // 錯誤處理
}
</code></pre>
<p>一些Apple的API在成功的情况下會寫一些垃圾值给錯誤參數(如果非空)，所以針對錯誤變數可能會造成虛假结果 (或者崩溃)。</p>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p>方法宣告中，在 -/+ 符號後應該有一個空格。方法片段之間也應該有一個空格。</p>
<p><strong>建議：</strong></p>
<pre><code>- (void)setExampleText:(NSString *)text image:(UIImage *)image;
</code></pre><h2 id="變數"><a href="#變數" class="headerlink" title="變數"></a>變數</h2><p>變數名稱應該盡可能命名具有描述性。除了 <code>for()</code> 迴圈外，其他情况都應該避免使用單字母的變數名。<br>星號表示指標變數，例如：<code>NSString *text</code> 不要寫成 <code>NSString* text</code> 或者 <code>NSString * text</code> ，常數除外。<br>盡量定義屬性來取代直接使用實體變數。除了初始化方法（<code>init</code>， <code>initWithCoder:</code>等）， <code>dealloc</code> 方法和自定義的setters和 getters内部，應避免直接存取實體變數。更多有關在初始化方法和 dealloc方法中使用存取器方法的資訊，可參考<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6" target="_blank" rel="noopener">這邊</a>。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">@interface NYTSection: NSObject

@property (nonatomic) NSString *headline;

@end
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">@interface NYTSection : NSObject {
    NSString *headline;
}

@property (nonatomic) NSString* string;
</code></pre>
<h4 id="變數屬性限制"><a href="#變數屬性限制" class="headerlink" title="變數屬性限制"></a>變數屬性限制</h4><p>當涉及到<a href="(https://developer.apple.com/library/ios/releasenotes/objectivec/rn-transitioningtoarc/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW4)">ARC</a>變數屬性限制時，<br>限制保留字 (<code>__strong</code>, <code>__weak</code>, <code>__unsafe_unretained</code>, <code>__autoreleasing</code>) 應該位於Class與變數名稱之間，如：<code>NSString * __weak text</code>。</p>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><p>盡可能遵照Apple的命名法則，尤其那些涉及到<a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html" target="_blank" rel="noopener">記憶體管理規範</a>，（<a href="http://stackoverflow.com/a/2865194/340508" target="_blank" rel="noopener">NonARC</a>）的。</p>
<p><strong>長一點</strong>和<strong>描述性</strong>的方法名稱和變數名稱都不错。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">UIButton *settingsButton;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">UIButton *setBut;
</code></pre>
<p>類別名稱和常數名稱應該使用三個字母當開頭（例如 <code>KRT</code>），但 Core Data 實體名稱可以省略。為了程式碼的乾淨，常數應該使用相關類別的名字作為開頭，並使用駝峰式命名法。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">static const NSTimeInterval NYTArticleViewControllerNavigationFadeAnimationDuration = 0.3;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">static const NSTimeInterval fadetime = 1.7;
</code></pre>
<p><strong>屬性</strong>和<strong>區域變數</strong>應該使用<strong>駝峰式命名法</strong>，並且首字母小寫。</p>
<p>為了保持一致，實體變數應該使用駝峰式命名，且首字母小寫，以下底線為開頭。這是<strong>LLVM</strong>的自動合成的實體變數一致。<br><strong>如果LLVM可以自動合成變數，那就讓它自動合成吧。</strong></p>
<p><strong>建議：</strong></p>
<pre><code class="objc">@synthesize descriptiveVariableName = _descriptiveVariableName;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">id varnm;
</code></pre>
<h3 id="註解"><a href="#註解" class="headerlink" title="註解"></a>註解</h3><p>當需要的时候，註解應該被用來解释 <strong>為什麼</strong> 特定程式做了某些事情。所使用之任何註解必須保持最新，否則就刪掉。</p>
<p>通常應避免一大塊註解，程式碼應該盡量作為自身的檔案，只需要隔幾行寫幾句說明。這並不適用於那些用來生成檔案的註解。</p>
<h3 id="init-和-dealloc"><a href="#init-和-dealloc" class="headerlink" title="init 和 dealloc"></a>init 和 dealloc</h3><p><code>dealloc</code> 方法應該放在<strong>實作檔</strong>最上面，並且剛好在 <code>@synthesize</code> 和 <code>@dynamic</code> 保留字的後面。在任何類別中，<code>init</code> 都應該直接放在 <code>dealloc</code> 方法的下方。</p>
<p><code>init</code> 方法的結構應該像這樣：</p>
<pre><code class="objc">- (instancetype)init {
    self = [super init]; // 呼叫指定的初始化方法
    if (self) {
        // Custom initialization
    }
    return self;
}
</code></pre>
<h3 id="字面變數"><a href="#字面變數" class="headerlink" title="字面變數"></a>字面變數</h3><p>當創建 <code>NSString</code>， <code>NSDictionary</code>， <code>NSArray</code>，和 <code>NSNumber</code> 物件的不可變實體時，都應該使用字面量。要注意 <code>nil</code> 值不能傳給 <code>NSArray</code> 和 <code>NSDictionary</code> 字面變數，這樣做會導致崩潰。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">NSArray *names = @[@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;, @&quot;Alex&quot;, @&quot;Steve&quot;, @&quot;Paul&quot;];
NSDictionary *productManagers = @{@&quot;iPhone&quot; : @&quot;Kate&quot;, @&quot;iPad&quot; : @&quot;Kamal&quot;, @&quot;Mobile Web&quot; : @&quot;Bill&quot;};
NSNumber *shouldUseLiterals = @YES;
NSNumber *buildingZIPCode = @10018;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">NSArray *names = [NSArray arrayWithObjects:@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;, @&quot;Alex&quot;, @&quot;Steve&quot;, @&quot;Paul&quot;, nil];
NSDictionary *productManagers = [NSDictionary dictionaryWithObjectsAndKeys: @&quot;Kate&quot;, @&quot;iPhone&quot;, @&quot;Kamal&quot;, @&quot;iPad&quot;, @&quot;Bill&quot;, @&quot;Mobile Web&quot;, nil];
NSNumber *shouldUseLiterals = [NSNumber numberWithBool:YES];
NSNumber *buildingZIPCode = [NSNumber numberWithInteger:10018];
</code></pre>
<h3 id="CGRect函式"><a href="#CGRect函式" class="headerlink" title="CGRect函式"></a>CGRect函式</h3><p>當存取一個 <code>CGRect</code> 的 <code>x</code>， <code>y</code>， <code>width</code>， <code>height</code> 时，應該使用<a href="http://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html" target="_blank" rel="noopener"><code>CGGeometry</code> 函式</a>取代直接存取結構體成員。Apple的 <code>CGGeometry</code> 参考中說到：</p>
<blockquote>
<p>All functions described in this reference that take CGRect data structures as inputs implicitly standardize those rectangles before calculating their results. For this reason, your applications should avoid directly reading and writing the data stored in the CGRect data structure. Instead, use the functions described here to manipulate rectangles and to retrieve their characteristics.</p>
</blockquote>
<p><strong>建議：</strong></p>
<pre><code class="objc">CGRect frame = self.view.frame;

CGFloat x = CGRectGetMinX(frame);
CGFloat y = CGRectGetMinY(frame);
CGFloat width = CGRectGetWidth(frame);
CGFloat height = CGRectGetHeight(frame);
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">CGRect frame = self.view.frame;

CGFloat x = frame.origin.x;
CGFloat y = frame.origin.y;
CGFloat width = frame.size.width;
CGFloat height = frame.size.height;
</code></pre>
<h3 id="常數"><a href="#常數" class="headerlink" title="常數"></a>常數</h3><p>常數使用字元、字串 字面變數或數值變數，因為常數可以輕易重用，且可以快速改變而不需要查找和替換。常數應該宣告為 <code>static</code> 常數而不是 <code>#define</code> ，除非很明確的要當做marco來使用。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">static NSString * const NYTAboutViewControllerCompanyName = @&quot;The New York Times Company&quot;;

static const CGFloat NYTImageThumbnailHeight = 50.0;
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">#define CompanyName @&quot;The New York Times Company&quot;

#define thumbnailHeight 2
</code></pre>
<h3 id="枚舉類型"><a href="#枚舉類型" class="headerlink" title="枚舉類型"></a>枚舉類型</h3><p>當使用 <code>enum</code> 時，建議使用新的基礎類型規範，因為它具有更强的類型檢查和程式碼補全功能。現在的SDK 包含了一個marco來建議使用者利用新的基礎類型 - <code>NS_ENUM()</code></p>
<p><strong>建議：</strong></p>
<pre><code class="objc">typedef NS_ENUM(NSInteger, NYTAdRequestState) {
    NYTAdRequestStateInactive,
    NYTAdRequestStateLoading
};
</code></pre>
<h3 id="位元碼"><a href="#位元碼" class="headerlink" title="位元碼"></a>位元碼</h3><p>當用到位元碼時，使用 <code>NS_OPTIONS</code> marco。</p>
<p><strong>舉例：</strong></p>
<pre><code class="objc">typedef NS_OPTIONS(NSUInteger, NYTAdCategory) {
    NYTAdCategoryAutos      = 1 &lt;&lt; 0,
    NYTAdCategoryJobs       = 1 &lt;&lt; 1,
    NYTAdCategoryRealState  = 1 &lt;&lt; 2,
    NYTAdCategoryTechnology = 1 &lt;&lt; 3
};
</code></pre>
<h3 id="私有屬性"><a href="#私有屬性" class="headerlink" title="私有屬性"></a>私有屬性</h3><p>私有屬性應該宣告在類別實作檔的延展(匿名的類目)中。有名字的類目(例如 <code>NYTPrivate</code> 或 <code>private</code>) 永遠都不應該使用，除非要擴展其他類別。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">@interface NYTAdvertisement ()

@property (nonatomic, strong) GADBannerView *googleAdView;
@property (nonatomic, strong) ADBannerView *iAdView;
@property (nonatomic, strong) UIWebView *adXWebView;

@end
</code></pre>
<h3 id="圖片命名"><a href="#圖片命名" class="headerlink" title="圖片命名"></a>圖片命名</h3><p>圖片名稱應該被統一命名，以保持組織的完整。它們應該被命名為一個說明它們<strong>用途的駝峰式字串</strong>，其次是自定義類別或屬性的無前綴名字（如果有的話），然後進一步說明<strong>顏色</strong>與<strong>對應的解析度識別(ex:iPhone 6 and iPhone 5為@2x)</strong>或 <strong>圖片展示位置</strong>，最後是它們的<strong>狀態</strong>。</p>
<p><strong>建議：</strong></p>
<ul>
<li><code>RefreshBarButtonItem</code> / <code>RefreshBarButtonItem@2x</code> 和 <code>RefreshBarButtonItemSelected</code> / <code>RefreshBarButtonItemSelected@2x</code></li>
<li><code>ArticleNavigationBarWhite</code> / <code>ArticleNavigationBarWhite@2x</code> 和 <code>ArticleNavigationBarBlackSelected</code> / <code>ArticleNavigationBarBlackSelected@2x</code>.</li>
</ul>
<p><a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconMatrix.html" target="_blank" rel="noopener">對應的解析度識別</a></p>
<p>圖片目錄中被用於類似目地的圖片應歸入各自組中。<br>最後確保圖片存放於<strong>Images.xcassets</strong>。</p>
<h3 id="布林"><a href="#布林" class="headerlink" title="布林"></a>布林</h3><p>因為 <code>nil</code> 解析為 <code>NO</code>，所以没有必要在條件中與它進行比較。永遠不要直接和 <code>YES</code> 進行比較，因為 <code>YES</code> 被定義為 1，而 <code>BOOL</code> 可以多達八位元。</p>
<p>這使得整個檔案有更多的一致性和更大的視覺清晰度。</p>
<p><strong>建議：</strong></p>
<pre><code class="objc">if (!someObject) {
}
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">if (someObject == nil) {
}
</code></pre>
<p><strong>對於 <code>BOOL</code> 來說, 這有兩種用法:</strong></p>
<pre><code class="objc">if (isAwesome)
if (![someObject boolValue])
</code></pre>
<p><strong>反對：</strong></p>
<pre><code class="objc">if ([someObject boolValue] == NO)
if (isAwesome == YES) // 絕對不要這麼做
</code></pre>
<p>如果一個 <code>BOOL</code> 屬性名稱是一個形容詞，屬性可以省略 “is” 前缀，但為 get 存取器指定一個慣用的名稱，例如：</p>
<pre><code class="objc">@property (assign, getter=isEditable) BOOL editable;
</code></pre>
<p>內容和範例來自 <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingIvarsAndTypes.html#//apple_ref/doc/uid/20001284-BAJGIIJE" target="_blank" rel="noopener">Cocoa 命名指南</a> 。</p>
<h3 id="單一實例"><a href="#單一實例" class="headerlink" title="單一實例"></a>單一實例</h3><p>單例對象應該使用執行緒安全的模式創建共享的實例。</p>
<pre><code class="objc">+ (instancetype)sharedInstance {
   static id sharedInstance = nil;

   static dispatch_once_t onceToken;
   dispatch_once(&amp;onceToken, ^{
      sharedInstance = [[self alloc] init];
   });

   return sharedInstance;
}
</code></pre>
<p>這將會預防<a href="http://cocoasamurai.blogspot.com/2011/04/singletons-your-doing-them-wrong.html" target="_blank" rel="noopener">有時可能產生的許多崩潰</a>。</p>
<h3 id="Xcode"><a href="#Xcode" class="headerlink" title="Xcode"></a>Xcode</h3><p>为了避免檔案複雜，實體檔案與目錄應該保持與Xcode同步。Xcode 建立的任何群組（group）都必须在檔案系统有相應的映射。為了更清晰，程式碼不僅應該按照<strong>類型</strong>進行分组，也可以根據<strong>功能</strong>進行分组。</p>
<p><img src="/images/msic/code_group.png" alt=""></p>
<p>如果可以的話，盡可能一直打開 target Build Settings 中 “Treat Warnings as Errors” 以及一些<a href="http://boredzo.org/blog/archives/2009-11-07/warnings" target="_blank" rel="noopener">額外的警告</a>。如果你需要忽略指定的警告,使用 <a href="http://clang.llvm.org/docs/UsersManual.html#controlling-diagnostics-via-pragmas" target="_blank" rel="noopener">Clang 的編譯特性</a> 。</p>
<h3 id="其他Objective-C風格指南"><a href="#其他Objective-C風格指南" class="headerlink" title="其他Objective-C風格指南"></a>其他Objective-C風格指南</h3><ul>
<li><a href="http://google-styleguide.googlecode.com/svn/trunk/objcguide.xml" target="_blank" rel="noopener">Google</a></li>
<li><a href="https://github.com/github/objective-c-conventions" target="_blank" rel="noopener">GitHub</a></li>
<li><a href="https://trac.adium.im/wiki/CodingStyle" target="_blank" rel="noopener">Adium</a></li>
<li><a href="https://gist.github.com/soffes/812796" target="_blank" rel="noopener">Sam Soffes</a></li>
<li><a href="http://cocoadevcentral.com/articles/000082.php" target="_blank" rel="noopener">CocoaDevCentral</a></li>
<li><a href="http://lukeredpath.co.uk/blog/my-objective-c-style-guide.html" target="_blank" rel="noopener">Luke Redpath</a></li>
<li><a href="http://www.cimgf.com/zds-code-style-guide/" target="_blank" rel="noopener">Marcus Zarra</a></li>
</ul>

        
    </section>
</article>



<div class="comments">
    <div id="disqus_thread">
        <p class="comment-tips">国内查看评论需要代理~</p>
    </div>
    <script>
    window.disqus_config = function () {
        this.language = 'zh';
        this.page.url = 'https://kairen.github.io/2013/11/03/msic/ios-code-style/';
        this.page.title = 'NYTime Objective-C 程式規範';
        this.page.identifier = '2013/11/03/msic/ios-code-style/';
    };
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://k2r2bai.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</div>
        <footer class="footer">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a>
</footer>


    </div>

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
    
    <script type="text/javascript" src="/js/scrollspy.min.js"></script>
    
    <script type="text/javascript">
        $(function() {
            var nodes = {
                nav: $('#nav'),
                aside: $('#aside'),
                navTags: $('#nav-tags')
            };

            $('#open-panel, #aside-mask').on('click', function() {
                nodes.aside.toggleClass('panel-show');
            });
            $('#nav-tag').on('click', function(event) {
                event.preventDefault();console.log(nodes.navTags.attr('class'))
                nodes.navTags.toggleClass('tag-show');console.log(nodes.navTags.attr('class'))
            })/*.hover(function() {
                nodes.navTags.addClass('tag-show');
            }, function() {
                nodes.navTags.removeClass('tag-show');
            });*/

            
            $(document.body).scrollspy({target: '#aside-inner'});
            
        });
    </script>

</body>
</html>
