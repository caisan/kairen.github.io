<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />

    

    

    <title>使用 Kops 部署 Kubernetes 至公有雲(AWS) | KaiRen&#39;s Blog</title>
    <meta name="author" content="Kyle Bai" />
    <meta name="version" content="1.0.0" />
    <meta name="keywords" content="undefined" />
    <meta name="description" content="Kops 是 Kubernetes 官方維護的專案，是一套 Production ready 的 Kubernetes 部署、升級與管理工具，早期用於 AWS 公有雲上建置 Kubernetes 叢集使用，但隨著社群的推進已支援 GCP、vSphere(Alpha)，未來也會有更多公有雲平台慢慢被支援(Maybe)。本篇簡單撰寫使用 Kops 部署一個叢集，過去自己因為公司都是屬於建置 On-premises 的 Kubernetes，因此很少使用 Kops，剛好最近社群分享又再一次接觸的關析，" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <meta name="baidu-site-verification" content="F0CXvmUgA9" />

    
    
    <link rel="icon" href="/images/favicon.png">
    

    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <div class="app">
        <header class="header clearfix">
    <div id="nav" class="nav">
    <button id="open-panel" class="open-panel"><i class="icon-library"></i></button>

    <nav class="nav-inner">

        
        
        <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/categories">Category</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/archives">Archive</a>
        </li>
        
        
        
        <li class="nav-item nav-item-tag">
            <a id="nav-tag" class="nav-link" href="#">Tag</a>
            <div id="nav-tags" class="nav-tag-wrap">
                <i class="nav-tag-arrow"></i>
                
  <div class="widget-wrap">
    <h3 class="widget-title">
        <i class="icon-tag vm"></i>
        <span class="vm">Tags</span>
    </h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/">AWS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ansible/">Ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Automation-Engine/">Automation Engine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bare-Metal/">Bare Metal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bare-metal/">Bare-metal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blockchain/">Blockchain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BlueStore/">BlueStore</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CNCF/">CNCF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Calico/">Calico</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ceph/">Ceph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Concurrent/">Concurrent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Container/">Container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CoreOS/">CoreOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DC-OS/">DC/OS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DL-ML/">DL/ML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Collect/">Data Collect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/">Database</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DevOps/">DevOps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DevStack/">DevStack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Distribution-System/">Distribution System</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker-Swarm/">Docker Swarm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker-registry/">Docker registry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ethereum/">Ethereum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Federation/">Federation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/File-System/">File System</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/">GPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Go-lang/">Go lang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/">Golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDFS/">HDFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP-Server/">HTTP Server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Helm/">Helm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/High-Availability/">High Availability</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/">Kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Keystone/">Keystone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kops/">Kops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/">Kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes-RBAC/">Kubernetes RBAC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LDAP/">LDAP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux-Container/">Linux Container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LinuxKit/">LinuxKit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Load-Balancer/">Load Balancer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Logging/">Logging</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Machine-Learning/">Machine Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mesos/">Mesos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Message-Queue/">Message Queue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Microkernel/">Microkernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Moby/">Moby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Monitoring/">Monitoring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NVIDIA-GPU/">NVIDIA GPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NoSQL/">NoSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/">OOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS-X/">OS X</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenStack/">OpenStack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openstack/">Openstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PXE/">PXE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Programming/">Programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prometheus/">Prometheus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Puppet/">Puppet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPDK/">SPDK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSD/">SSD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Smart-Contract/">Smart Contract</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Solidity/">Solidity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spark/">Spark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Storage/">Storage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/">TensorFlow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vagrant/">Vagrant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visualization/">Visualization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
    </div>
  </div>


            </div>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/about">About</a>
        </li>
        
        
        
        <li class="nav-item">
            <a class="nav-link" href="/atom.xml">Feed</a>
        </li>
        
        
        

    </nav>
</div>

    <aside id="aside" class="aside">
    <div id="aside-mask" class="aside-mask"></div>
    <div id="aside-inner" class="aside-inner">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="https://kairen.github.io"></form>

        
        
        
        

        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#事前準備"><span class="toc-number">1.</span> <span class="toc-text">事前準備</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#建立-S3-Bucket-與-Route53-Hosted-Zone"><span class="toc-number">2.</span> <span class="toc-text">建立 S3 Bucket 與 Route53 Hosted Zone</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#部署-Kubernetes-叢集"><span class="toc-number">3.</span> <span class="toc-text">部署 Kubernetes 叢集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#測試"><span class="toc-number">4.</span> <span class="toc-text">測試</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#刪除節點"><span class="toc-number">5.</span> <span class="toc-text">刪除節點</span></a></li></ol>
        
    </div>
</aside>

</header>

        <div id="content" class="content"><article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            使用 Kops 部署 Kubernetes 至公有雲(AWS)
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="/2018/04/18/kubernetes/deploy/kops-aws/">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2018-04-18T09:08:54.000Z" itemprop="datePublished">2018-04-18</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/AWS/">AWS</a>, <a class="article-tag-link" href="/tags/Kubernetes/">Kubernetes</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <p><a href="https://github.com/kubernetes/kops" target="_blank" rel="noopener">Kops</a> 是 Kubernetes 官方維護的專案，是一套 Production ready 的 Kubernetes 部署、升級與管理工具，早期用於 AWS 公有雲上建置 Kubernetes 叢集使用，但隨著社群的推進已支援 GCP、vSphere(Alpha)，未來也會有更多公有雲平台慢慢被支援(Maybe)。本篇簡單撰寫使用 Kops 部署一個叢集，過去自己因為公司都是屬於建置 On-premises 的 Kubernetes，因此很少使用 Kops，剛好最近社群分享又再一次接觸的關析，所以就來寫個文章。</p>
<p>本次安裝的軟體版本：</p>
<ul>
<li>Kubernetes v1.9.3</li>
<li>Kops v1.9.0</li>
</ul>
<a id="more"></a>
<h2 id="事前準備"><a href="#事前準備" class="headerlink" title="事前準備"></a>事前準備</h2><p>開始使用 Kops 前，需要先安裝下列工具到操作機器上來提供使用：</p>
<ul>
<li><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noopener">kubectl</a>：用來操作部署完成的 Kubernetes 叢集。</li>
<li><a href="https://github.com/kubernetes/kops" target="_blank" rel="noopener">kops</a>：本次使用工具，用來部署與管理公有雲上的 Kubernetes 叢集。</li>
</ul>
<p>Mac OS X：</p>
<pre><code class="sh">$ brew update &amp;&amp; brew install kops
</code></pre>
<p>Linux distro：</p>
<pre><code class="sh">$ curl -LO https://github.com/kubernetes/kops/releases/download/$(curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d &#39;&quot;&#39; -f 4)/kops-linux-amd64
$ chmod +x kops-linux-amd64 &amp;&amp; sudo mv kops-linux-amd64 /usr/local/bin/kops
</code></pre>
<ul>
<li><a href="https://aws.amazon.com/cli/?nc1=h_ls" target="_blank" rel="noopener">AWS CLI</a>：用來操作 AWS 服務的工具。</li>
</ul>
<pre><code class="sh">$ sudo pip install awscli
$ aws --version
aws-cli/1.15.4
</code></pre>
<p>上述工具完成後，我們還要準備一下資訊：</p>
<ul>
<li>申請 AWS 帳號，並在 IAM 服務新增一個 User 設定存取所有服務(AdministratorAccess)。另外這邊要記住 AccessKey 與 SecretKey。<blockquote>
<p>一般來說只需開啟 S3、Route53、EC2、EBS 與 ELB 就好，但由於偷懶就全開。</p>
</blockquote>
</li>
</ul>
<p><img src="/images/kops/iam-user2.png" alt=""></p>
<ul>
<li>擁有自己的 Domain Name，這邊可以在 AWS Route53 註冊，或者是到 GoDaddy 購買。</li>
</ul>
<h2 id="建立-S3-Bucket-與-Route53-Hosted-Zone"><a href="#建立-S3-Bucket-與-Route53-Hosted-Zone" class="headerlink" title="建立 S3 Bucket 與 Route53 Hosted Zone"></a>建立 S3 Bucket 與 Route53 Hosted Zone</h2><p>首先透過 aws 工具進行設定使用指定 AccessKey 與 SecretKey：</p>
<pre><code class="sh">$ aws configure
AWS Access Key ID [****************QGEA]:
AWS Secret Access Key [****************zJ+w]:
Default region name [None]:
Default output format [None]:
</code></pre>
<blockquote>
<p>設定的 Keys 可以在<code>~/.aws/credentials</code>找到。</p>
</blockquote>
<p>完成後建立一個 S3 bucket 用來儲存 Kops 狀態：</p>
<pre><code class="sh">$ aws s3 mb s3://kops-k8s-1 --region us-west-2
make_bucket: kops-k8s-1
</code></pre>
<blockquote>
<p>這邊 region 可自行選擇，這邊選用 Oregon。</p>
</blockquote>
<p>接著建立一個 Route53 Hosted Zone：</p>
<pre><code class="sh">$ aws route53 create-hosted-zone \
    --name k8s.example.com \
    --caller-reference $(date &#39;+%Y-%m-%d-%H:%M&#39;)

# output
{
    &quot;HostedZone&quot;: {
        &quot;ResourceRecordSetCount&quot;: 2,
        &quot;CallerReference&quot;: &quot;2018-04-25-16:16&quot;,
        &quot;Config&quot;: {
            &quot;PrivateZone&quot;: false
        },
        &quot;Id&quot;: &quot;/hostedzone/Z2JR49ADZ0P3WC&quot;,
        &quot;Name&quot;: &quot;k8s.example.com.&quot;
    },
    &quot;DelegationSet&quot;: {
        &quot;NameServers&quot;: [
            &quot;ns-1547.awsdns-01.co.uk&quot;,
            &quot;ns-1052.awsdns-03.org&quot;,
            &quot;ns-886.awsdns-46.net&quot;,
            &quot;ns-164.awsdns-20.com&quot;
        ]
    },
    &quot;Location&quot;: &quot;https://route53.amazonaws.com/2013-04-01/hostedzone/Z2JR49ADZ0P3WC&quot;,
    &quot;ChangeInfo&quot;: {
        &quot;Status&quot;: &quot;PENDING&quot;,
        &quot;SubmittedAt&quot;: &quot;2018-04-25T08:16:57.462Z&quot;,
        &quot;Id&quot;: &quot;/change/C3802PE0C1JVW2&quot;
    }
}
</code></pre>
<blockquote>
<p>請修改<code>--name</code>為自己所擁有的 domain name。</p>
</blockquote>
<p>之後將上述<code>NameServers</code>新增至自己的 Domain name 的 record 中，如 Godaddy：</p>
<p><img src="/images/kops/route53-hostedzone.png" alt=""></p>
<h2 id="部署-Kubernetes-叢集"><a href="#部署-Kubernetes-叢集" class="headerlink" title="部署 Kubernetes 叢集"></a>部署 Kubernetes 叢集</h2><p>當上述階段完成後，在自己機器建立 SSH key，就可以使用 Kops 來建立 Kubernetes 叢集：</p>
<pre><code class="sh">$ ssh-keygen -t rsa
$ kops create cluster \
    --name=k8s.example.com \
    --state=s3://kops-k8s-1 \
    --zones=us-west-2a \
    --master-size=t2.micro \
    --node-size=t2.micro \
    --node-count=2 \
    --dns-zone=k8s.example.com

# output
...
Finally configure your cluster with: kops update cluster k8s.example.com --yes
</code></pre>
<p>若過程沒有發生錯誤的話，最後會提示再執行 update 來正式進行部署：</p>
<pre><code class="sh">$ kops update cluster k8s.example.com --state=s3://kops-k8s-1 --yes
# output
...
Cluster is starting.  It should be ready in a few minutes.
</code></pre>
<p>當看到上述資訊時，表示叢集已建立，這時候等待環境初始化完成後就可以使用 kubectl 來操作：</p>
<pre><code class="sh">$ kubectl get node
NAME                                          STATUS    ROLES     AGE       VERSION
ip-172-20-32-194.us-west-2.compute.internal   Ready     master    1m        v1.9.3
ip-172-20-32-21.us-west-2.compute.internal    Ready     node      22s       v1.9.3
ip-172-20-54-100.us-west-2.compute.internal   Ready     node      28s       v1.9.3
</code></pre>
<h2 id="測試"><a href="#測試" class="headerlink" title="測試"></a>測試</h2><p>完成後就可以進行功能測試，這邊簡單建立 Nginx app：</p>
<pre><code class="sh">$ kubectl run nginx --image nginx --port 80
$ kubectl expose deploy nginx --type=LoadBalancer --port 80
$ kubectl get po,svc
NAME                        READY     STATUS    RESTARTS   AGE
po/nginx-7587c6fdb6-7qtlr   1/1       Running   0          50s

NAME             TYPE           CLUSTER-IP    EXTERNAL-IP        PORT(S)        AGE
svc/kubernetes   ClusterIP      100.64.0.1    &lt;none&gt;             443/TCP        8m
svc/nginx        LoadBalancer   100.68.96.3   ad99f206f486e...   80:30174/TCP   28s
</code></pre>
<p>這邊會看到<code>EXTERNAL-IP</code>會直接透過 AWS ELB 建立一個 Load Balancer，這時只要更新 Route53 的 record set 就可以存取到服務：</p>
<pre><code class="sh">$ export DOMAIN_NAME=k8s.example.com
$ export NGINX_LB=$(kubectl get svc/nginx \
  --template=&quot;{{range .status.loadBalancer.ingress}} {{.hostname}} {{end}}&quot;)

$ cat &lt;&lt;EOF &gt; dns-record.json
{
  &quot;Comment&quot;: &quot;Create/Update a latency-based CNAME record for a federated Deployment&quot;,
  &quot;Changes&quot;: [
    {
      &quot;Action&quot;: &quot;UPSERT&quot;,
      &quot;ResourceRecordSet&quot;: {
        &quot;Name&quot;: &quot;nginx.${DOMAIN_NAME}&quot;,
        &quot;Type&quot;: &quot;CNAME&quot;,
        &quot;Region&quot;: &quot;us-west-2&quot;,
        &quot;TTL&quot;: 300,
        &quot;SetIdentifier&quot;: &quot;us-west-2&quot;,
        &quot;ResourceRecords&quot;: [
          {
            &quot;Value&quot;: &quot;${NGINX_LB}&quot;
          }
        ]
      }
    }
  ]
}
EOF

$ export HOSTED_ZONE_ID=$(aws route53 list-hosted-zones \
       | jq -r &#39;.HostedZones[] | select(.Name==&quot;&#39;${DOMAIN_NAME}&#39;.&quot;) | .Id&#39; \
       | sed &#39;s/\/hostedzone\///&#39;)

$ aws route53 change-resource-record-sets \
    --hosted-zone-id ${HOSTED_ZONE_ID} \
    --change-batch file://dns-record.json

# output
{
    &quot;ChangeInfo&quot;: {
        &quot;Status&quot;: &quot;PENDING&quot;,
        &quot;Comment&quot;: &quot;Create/Update a latency-based CNAME record for a federated Deployment&quot;,
        &quot;SubmittedAt&quot;: &quot;2018-04-25T10:06:02.545Z&quot;,
        &quot;Id&quot;: &quot;/change/C79MFJRHCF05R&quot;
    }
}
</code></pre>
<p>完成後透過 cURL 工作來測試：</p>
<pre><code class="sh">$ curl nginx.k8s.example.com
...
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
...
</code></pre>
<h2 id="刪除節點"><a href="#刪除節點" class="headerlink" title="刪除節點"></a>刪除節點</h2><p>當叢集測完後，可以利用以下指令來刪除：</p>
<pre><code class="sh">$ kops delete cluster \
 --name=k8s.example.com \
 --state=s3://kops-k8s-1 --yes

Deleted cluster: &quot;k8s.k2r2bai.com&quot;

$ aws s3 rb s3://kops-k8s-1 --force
remove_bucket: kops-k8s-1
</code></pre>
<p>接著清除 Route53 所有 record 並刪除 hosted zone：</p>
<pre><code class="sh">$ aws route53 list-resource-record-sets \
  --hosted-zone-id ${HOSTED_ZONE_ID} |
jq -c &#39;.ResourceRecordSets[]&#39; |
while read -r resourcerecordset; do
  read -r name type &lt;&lt;&lt;$(echo $(jq -r &#39;.Name,.Type&#39; &lt;&lt;&lt;&quot;$resourcerecordset&quot;))
  if [ $type != &quot;NS&quot; -a $type != &quot;SOA&quot; ]; then
    aws route53 change-resource-record-sets \
      --hosted-zone-id ${HOSTED_ZONE_ID} \
      --change-batch &#39;{&quot;Changes&quot;:[{&quot;Action&quot;:&quot;DELETE&quot;,&quot;ResourceRecordSet&quot;:
          &#39;&quot;$resourcerecordset&quot;&#39;
        }]}&#39; \
      --output text --query &#39;ChangeInfo.Id&#39;
  fi
done

$ aws route53 delete-hosted-zone --id ${HOSTED_ZONE_ID}
</code></pre>

        
    </section>
</article>

</div>
        <footer class="footer">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a>
</footer>


    </div>

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
    
    <script type="text/javascript" src="/js/scrollspy.min.js"></script>
    
    <script type="text/javascript">
        $(function() {
            var nodes = {
                nav: $('#nav'),
                aside: $('#aside'),
                navTags: $('#nav-tags')
            };

            $('#open-panel, #aside-mask').on('click', function() {
                nodes.aside.toggleClass('panel-show');
            });
            $('#nav-tag').on('click', function(event) {
                event.preventDefault();console.log(nodes.navTags.attr('class'))
                nodes.navTags.toggleClass('tag-show');console.log(nodes.navTags.attr('class'))
            })/*.hover(function() {
                nodes.navTags.addClass('tag-show');
            }, function() {
                nodes.navTags.removeClass('tag-show');
            });*/

            
            $(document.body).scrollspy({target: '#aside-inner'});
            
        });
    </script>

</body>
</html>
